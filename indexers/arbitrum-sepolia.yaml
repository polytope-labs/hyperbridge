specVersion: 1.0.0
version: 0.0.1
name: arbitrum-sepolia
description: Arbitrum Sepolia Chain Indexer
runner:
  node:
    name: "@subql/node-ethereum"
    version: ">=3.0.0"
  query:
    name: "@subql/query"
    version: "*"
schema:
  file: ./schema.graphql
network:
  chainId: "421614"
  endpoint:
    - "https://sepolia-rollup.arbitrum.io/rpc"
dataSources:
  # EthereumHost contract
  - kind: ethereum/Runtime
    startBlock: 20034995
    options:
      abi: ethereumHost
      address: "0x56101AD00677488B3576C85e9e75d4F0a08BD627"
    assets:
      ethereumHost:
        file: ./abis/EthereumHost.abi.json
    mapping:
      file: ./dist/index.js
      handlers:
        - kind: ethereum/LogHandler
          handler: handleArbitrumSepoliaPostRequestHandledEvent
          filter:
            topics:
              - "PostRequestHandled(bytes32, address)"

  # Protocol Fee Token
  - kind: ethereum/Runtime
    startBlock: 20032482
    options:
      abi: erc6160ext20
      address: "0x6df8dE86458D15a3Be3A6B907e6aE6B7af352452"
    assets:
      erc6160ext20:
        file: ./abis/ERC6160Ext20.abi.json
    mapping:
      file: ./dist/index.js
      handlers:
        - kind: ethereum/LogHandler
          handler: handleArbitrumSepoliaTransferEvent
          filter:
            topics:
              - "Transfer(address indexed from, address indexed to, uint256 amount)"

  # EthereumHost contract
  - kind: ethereum/Runtime
    startBlock: 20036071
    options:
      abi: handlerV1
      address: "0x5cD7935ffE0942f6fF05D447A1325109510DD846"
    assets:
      handlerV1:
        file: ./abis/HandlerV1.abi.json
    mapping:
      file: ./dist/index.js
      handlers:
        - kind: ethereum/TransactionHandler
          handler: handlePostRequestTransaction
          filter:
            function: "0xfda626c3"

repository: "https://github.com/polytope-labs/hyperbridge"
